# Add tag to Main and create Release in GitHub.com
name: tag-release
run-name: Tag and Release 🚀

on:
  workflow_call:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
# permissions:
#  contents: read

jobs:
  # Build static site using Reveal-MD
  # if branch = main
  semver-tag:
    name: SemVer Tag
    timeout-minutes: 10
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Next Version
        id: next-version
        uses: paulhatch/semantic-version@v5.0.3
        with:
          tag_prefix: 'v'
          format: '${major}.${minor}.${patch}'
      - name: Display SemVer
        run: |
          echo "${{ steps.next-version.outputs.version_tag }}"

#      - name: Create tag
#        uses: actions/github-script@v6
#        with:
#          script: |
#            github.rest.git.createRef({
#              owner: context.repo.owner,
#              repo: context.repo.repo,
#              ref: 'refs/tags/<tagname>',
#              sha: context.sha
#            })
      