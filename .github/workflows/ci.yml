# CI/CD pipeline for new features
name: cicd-pipeline
run-name: CI-CD pipeline for issue ${{ github.ref_name }}

on:
  # Runs on pushes targeting 'feature branches' (any branch that is NOT the default branch)
  # push:
  #  branches-ignore: [$default-branch]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# permissions:
#  contents: read

jobs:
  # Build static site using Reveal-MD
  build-ci:
    name: Build CI
    uses: ./.github/workflows/reuse-build-revealmd.yml
    with: 
      branch-name: ${{ github.ref_name }}
      deploy-stage: 'ci'
  # Add tag for next version
  add-tag:
    name: Add Tag
    uses: ./.github/workflows/reuse-tag-release.yml      

  # Upload testing result artifacts
  # TODO
  # Update related issue on repo
  # TODO: uses:reuse-update-issue.yml